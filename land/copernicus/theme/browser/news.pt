<div tal:define="news_list view/news;
                 has_news python:True if len(news_list) > 0 else False;"
     id="insitu-news">

  <!-- Latest news -->
  <div class="panel panel-default">
    <div class="panel-heading">
      <i class="fa fa-newspaper-o" aria-hidden="true"></i>
      News
    </div>
    <div class="panel-body">

      <div class="listing block-inset">
        <div class="listing-body">
          <ul class="listing-items" tal:condition="python:has_news">
            <tal:repeat tal:repeat="news python:news_list">
              <li class="listing-item"
                  tal:define="news_object python:news.getObject();
                              news_date python:news_object.getField('modification_date').getAccessor(news_object)();
                              news_title python:news_object.getField('title').getAccessor(news_object)();
                              news_image python:news_object.getField('image').getAccessor(news_object)();
                              news_url python:news_object.absolute_url();
                              news_description python:news_object.getField('description').getAccessor(news_object)();">

                <div class="news snippet">
                  <div class="news-preview">
                    <tal:condition tal:condition="news_image">
                      <img class="insitu-img-preview" tal:replace="structure news_image" />
                    </tal:condition>
                    <tal:condition tal:condition="not:news_image">
                      <img class="insitu-img-preview" src="./preview_image.png" alt="Preview image">
                    </tal:condition>
                  </div>

                  <div class="news-body">
                    <h4 class="news-title">
                      <a href="" tal:attributes="href python:news_url">
                        <span tal:replace="python:news_date.day()"></span>
                        <span tal:replace="python:news_date.Month()[:3]"></span>
                        <span tal:replace="python:news_date.year()"></span>
                      </a>
                    </h4>
                    <div class="news-description">
                      <p>
                        <span tal:replace="python:news_title"></span>
                      </p>
                    </div>
                  </div>

                </div>
              </li>
            </tal:repeat>
          </ul>

          <p tal:condition="python:has_news is False">No news.</p>

          <h4  class="text-right insitu-view-all-news">
            <a href="./news">view all</a>
          </h4>
        </div>
      </div><!-- Latest news -->

    </div>
  </div>
</div>
